<div class="forgot-password-viewport">
  <!-- Logo in top left corner -->
  <div class="auth-logo">
    <button 
      class="logo-button"
      (click)="onLogoClick()">
      @if (isDarkMode) {
        <img src="assets/icons/logo-dark.png" alt="Verbatim Logo" class="logo-image">
      } @else {
        <img src="assets/icons/logo-light.png" alt="Verbatim Logo" class="logo-image">
      }
    </button>
  </div>

  <div class="forgot-password-box">
    @if (!emailSent) {
      <div class="forgot-password-header">
        <header>Forgot Password</header>
        <p>Enter your email address to reset your password</p>
      </div>

      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <div class="input-box">
          <input 
            type="email" 
            class="input-field" 
            id="email" 
            formControlName="emailAddress"
            autocomplete="off" 
            required
            [ngClass]="{'error': emailAddress?.invalid && (emailAddress?.dirty || emailAddress?.touched || submitted)}"
          >
          <label for="email">Email Address</label>
        </div>

        <div class="validation-message" [class.has-error]="getValidationMessage()">{{ getValidationMessage() }}</div>

        <div class="input-box">
          <input type="submit" class="input-submit" value="Send Reset Link" [disabled]="loading">
        </div>
      </form>

      <div class="back-to-login">
        <p>Remember your password? <a (click)="onBackToLogin()" [class.disabled-link]="loading">Back to Login</a></p>
      </div>
    } @else {
      <div class="email-sent-content">
        <div class="email-sent-header">
          <header>Check Your Email</header>
          <p>We've sent a password reset link to your email address</p>
        </div>

        <div class="email-sent-message">
          <p>If an account with that email address exists, you'll receive a link to reset your password. Please check your inbox and follow the instructions.</p>
        </div>

        <div class="email-sent-actions">
          <button class="input-submit" (click)="onBackToLogin()">Back to Login</button>
        </div>

        <div class="email-sent-footer">
          <p>Didn't receive the email? <a (click)="emailSent = false; submitted = false">Try again</a></p>
        </div>
      </div>
    }
  </div>

  <app-auth-footer></app-auth-footer>
</div>
