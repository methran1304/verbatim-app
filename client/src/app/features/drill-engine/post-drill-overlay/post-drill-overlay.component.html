@if (show) {
  <nz-card id="post-drill-overlay" #postdrilloverlay>
    <div class="post-drill-btn-row">
      <span class="post-drill-btn" 
            (click)="postDrillRestart.emit()"
            nz-tooltip
            nzTooltipTitle="Start the drill again with the same text and settings. Perfect for practicing the same passage multiple times."
            [nzTooltipMouseEnterDelay]="1.5">
        <span nz-icon nzType="reload" nzTheme="outline" style="font-size: 16px;"></span>
        <span class="button-text">Start Over</span>
      </span>
      <nz-divider nzType="vertical"></nz-divider>
      <span class="post-drill-btn" 
            (click)="!hasBeenInactive && postDrillSubmit.emit()"
            [class.disabled]="isSubmitting || hasBeenInactive"
            [class.error]="submitError || hasBeenInactive"
            nz-tooltip
            [nzTooltipTitle]="hasBeenInactive ? afkReason : 'Submit your drill results and save your performance data. View detailed statistics and track your progress.'"
            [nzTooltipMouseEnterDelay]="1.5">
        @if (isSubmitting) {
          <span nz-icon nzType="loading" nzTheme="outline" style="font-size: 16px;"></span>
          <span class="button-text">Submitting...</span>
        } @else if (submitError) {
          <span nz-icon nzType="exclamation-circle" nzTheme="outline" style="font-size: 16px;"></span>
          <span class="button-text">Retry</span>
        } @else if (hasBeenInactive) {
          <span nz-icon nzType="stop" nzTheme="outline" style="font-size: 16px;"></span>
          <span class="button-text">AFK Detected</span>
        } @else {
          <span nz-icon nzType="check-circle" nzTheme="outline" style="font-size: 16px;"></span>
          <span class="button-text">Submit</span>
        }
      </span>
    </div>
    
    @if (submitError) {
      <div class="error-message">
        <span nz-icon nzType="exclamation-circle" nzTheme="outline"></span>
        <span>{{ submitError }}</span>
      </div>
    }
  </nz-card>
} 