@if (!showPostDrillOverlay && delayedAfkOverlay) {
  <nz-card id="afk-overlay" #afkoverlay>
    <p>Click here to start typing</p>
  </nz-card>
}

@if (showPostDrillOverlay) {
  <nz-card id="post-drill-overlay" #postdrilloverlay>
    <div class="post-drill-btn-row">
      <span class="post-drill-btn" (click)="postDrillRestart.emit()">
        <span nz-icon nzType="reload" nzTheme="outline"></span>
        <span class="button-text">Start Over</span>
      </span>
      <nz-divider nzType="vertical"></nz-divider>
      <span class="post-drill-btn" (click)="postDrillSubmit.emit()">
        <span nz-icon nzType="check-circle" nzTheme="outline"></span>
        <span class="button-text">Submit</span>
      </span>
    </div>
  </nz-card>
}

<div class="drill-text-wrapper"
     [ngClass]="{'afk' : !isFocused || showPostDrillOverlay, 'afk-cursor': delayedAfkOverlay && !showPostDrillOverlay}">
  <nz-card class="drill-text" #drillText>
    <div class="drill-text-inner">
      <ng-container *ngFor="let word of sourceText; let wi = index">
        <nz-tag class="word" [ngClass]="getWordClass(wi)" #wordEl>
          <ng-container *ngFor="let char of word; let ci = index">
            <span
              [ngClass]="
                getLetterClass(wi, ci) +
                (char === ' ' && getLetterClass(wi, ci) === 'letter-active'
                  ? ' letter-active-space'
                  : '')
              "
            >
              {{ char === " " ? "‚ê£" : char }}
            </span>
          </ng-container>
        </nz-tag>
      </ng-container>
    </div>
  </nz-card>

  <div class="fade-top"></div>
  <div class="fade-bottom"></div>
</div>