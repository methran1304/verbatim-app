@if (show) {
  <nz-card id="room-mode-overlay" #roommodeoverlay>
    <div class="room-mode-content">
      <!-- Title -->
      <div class="lobby-title">
        <h2>Lobby</h2>
      </div>

      <!-- Description -->
      <div class="lobby-description">
        <p>Waiting room for competitive drill. Share the room code with friends to start competing together.</p>
      </div>

      <!-- Room Code -->
      <div class="room-code-section">
        <span class="room-code-label">Room Code:</span>
        <span class="room-code">#{{ roomCode }}</span>
        <button class="copy-button" (click)="onCopyRoomCode()" nz-button nzType="text" nzSize="small">
          <span nz-icon nzType="copy" nzTheme="outline"></span>
        </button>
      </div>





      <!-- Room Actions -->
      <div class="room-actions">
        @if (userRole === 'Creator') {
          <button 
            nz-button 
            nzType="primary" 
            (click)="onSetReady()" 
            [class.ready]="isCurrentUserReady"
            class="post-drill-btn">
            <span nz-icon [nzType]="isCurrentUserReady ? 'check-circle' : 'clock-circle'" nzTheme="outline"></span>
            <span class="button-text">Ready</span>
          </button>
          <button 
            nz-button 
            nzType="primary" 
            [disabled]="!canStartDrill"
            [nzLoading]="!canStartDrill"
            (click)="onStartDrill()"
            class="post-drill-btn">
            <span nz-icon nzType="play-circle" nzTheme="outline" style="font-size: 16px;"></span>
            <span class="button-text">{{ getStartDrillButtonText() }}</span>
          </button>
        } @else {
          <button 
            nz-button 
            nzType="primary" 
            (click)="onSetReady()" 
            [class.ready]="isCurrentUserReady"
            class="post-drill-btn">
            <span nz-icon [nzType]="isCurrentUserReady ? 'check-circle' : 'clock-circle'" nzTheme="outline"></span>
            <span class="button-text">Ready</span>
          </button>
        }
        
        <span 
          class="post-drill-btn"
          nz-popconfirm
          [nzPopconfirmTitle]="userRole === 'Creator' ? 'Room will be disbanded if you leave. Are you sure you want to leave this room?' : 'Are you sure you want to leave this room?'"
          nzOkText="Yes"
          nzCancelText="No"
          (nzOnConfirm)="onLeaveRoom()">
          <span nz-icon nzType="logout" nzTheme="outline" style="font-size: 16px;"></span>
          <span class="button-text">Leave Room</span>
        </span>
      </div>
    </div>
  </nz-card>
}
